
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}




<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js" type="text/javascript"></script>

<link href="http://162.13.221.18/EF/Scripts/DataTable//dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="http://162.13.221.18/EF/Scripts/DataTable/responsive.bootstrap.min.css" rel="stylesheet" />
<script src="http://162.13.221.18/EF/Scripts/DataTable//jquery.dataTables.min.js"></script>
<script src="http://162.13.221.18/EF/Scripts/DataTable//dataTables.bootstrap4.min.js"></script>
<script src="http://162.13.221.18/EF/Scripts/DataTable/angular-datatables.js"></script>


<script type="text/javascript">

    $(document).ready(function () {
        @*console.log( @Html.Raw(Json.Encode(ViewBag.Total)));*@
        //  console.log(@Html.Raw(Json.Encode(ViewBag.dtJSON)));
    });
    var app = angular.module('MyApp',  ['datatables'])
    app.controller('MyController', function ($scope, $window, $http,$location, DTOptionsBuilder) {


        $scope.dtOptions = DTOptionsBuilder.newOptions()
       .withDisplayLength(10)
       .withOption('bLengthChange', false)
       .withOption('bFilter', false)
       .withOption('bInfo', false)
       .withLanguage({ "sEmptyTable": "No data available" })
        $scope.u={};
        $scope.dtInstance = {};
        $scope.FormList = [];//JSON.parse(@Html.Raw(Json.Encode(ViewBag.dtJSON)))
        $scope.SubmitFormList = [];//JSON.parse(@Html.Raw(Json.Encode(ViewBag.dtJSON)))
        $scope.TargetEmailList = [];
        $scope.FLength="";
        $scope.ORGID = @Session["OrgID"].ToString();
        var emailPattern = /^([a-zA-Z0-9])+([a-zA-Z0-9._%+-])+@@([a-zA-Z0-9_.-])+\.(([a-zA-Z]){2,6})$/;


        $scope.init=function()
        {
            $scope.Search();
        }


        $scope.Search=function()
        {

            $http({
                url: '@Url.Content("~/api/EFormApi/GetSubmitFormList")',
                method: "GET",
                params: {UserID: $("#LoginUserID").val(),HistryData:HM}
            })
          .then(function (response) {
              console.log(response.data);
              $scope.SubmitFormList = JSON.parse(response.data);

          });
        }

    });



</script>
<style>
    #tbl1 {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        border-width: 1px;
        border-color: #999999;
        border-collapse: collapse;
        width: 99% !important;
        max-width: 99% !important;
    }

        #tbl1 th {
            border-width: 1px;
            padding: 8px;
            /*color: #ffffff;*/
            border-style: solid;
            border-color: #eeeeee;
            /*background-color: #428bca !important;*/
        }

        #tbl1 td {
            border-width: 1px;
            padding: 4px;
            border-style: solid;
            border-color: #eeeeee;
        }

        #tbl1 tbody tr:hover {
            cursor: pointer !important;
            background-color: #eeeeee;
        }
</style>
<div class="panel panel-default">
    <div class="panel-heading"><strong>Search Forms</strong> </div>
    <div class="panel-body" ng-app="MyApp" ng-controller="MyController" ng-init="init()">

        <hr />
        <h1>Report List</h1>
        <div class="row">
            <div class="form-group">
                <div class="col-md-12">
                    <table class="table-bordered" style="width:100%" id="tbl1" datatable="ng" dt-options="dtOptions" dt-instance="dtInstance">
                        <thead>
                            <tr class="thead-primary">
                                <th>S.No</th>
                                <th>Party Name</th>
                                <th>Tick Time</th>
                                <th>GPS ID</th>
                                <th>Finger Image</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="m in SubmitFormList  track by $index">
                                <td>{{$index+1}}</td>
                                <td>{{m.PartyName}}</td>
                                <td>{{m.TickTime | date:'dd/MM/yyyy'}}</td>

                                <td>{{m.GPSID}}</td>
                                <td>{{m.FStatus}}</td>
                                <td>{{m.FingerImage}}</td>

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


