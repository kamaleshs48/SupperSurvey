
@{
    ViewBag.Title = "EditSurvey";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
}


<script>
    $(".menu2").removeClass("active").removeClass("toggled");
    $(".menu1").addClass("active").addClass("toggled");
    $(document).ready(function () {
        $("#P1").hide();
        $("#P2").hide();
        $("#P3").hide();

        $("#Survey_Type_ID").change();


    });
    function BindParty(id) {
        $("#P1").hide();
        $("#P2").hide();
        $("#P3").hide();
        $('#P' + id.value).show();

    }
	
	function funDelete()
	{
		swal({
                    title: "",
                    text: "Do you want to delete this?",
                    showCancelButton: true,
                    confirmButtonColor: "#285e8e",
                    cancelButtonColor: "#285e8e",
                    confirmButtonText: "Yes",
                    cancelButtonText: "No",
                },function (isConfirm) {
                    if (isConfirm) {
                      
                    }
                });
	}
	
	
	function ShowParty()
	{
		  $("#AddPartyModel").modal({
                            backdrop: 'static'
                        });
	}
	
</script>



@model SuperSurvey.Models.SurveyMasterModels
@using (Html.BeginForm("EditSurvey", "App"))
{
    <div class="panel panel-success">
        <div class="panel-heading">
            <strong>Create Survey</strong>
        </div>
        <div class="panel-body">
           
            @Html.HiddenFor(m => m.SurveyID)
            @Html.HiddenFor(m => m.ORG_ID)
            <div class="pmbb-edit" id="conedit">
                <dl class="dl-horizontal">
                    <dt class="p-t-10">Name</dt>
                    <dd>
                        <div class="fg-line">
                            @Html.TextBoxFor(m => m.Name, new { @class = "form-control" })

                        </div>
                    </dd>
                    <dt class="p-t-10">Description</dt>
                    <dd>
                        <div class="fg-line">
                            @Html.TextBoxFor(m => m.Description, new { @class = "form-control" })
                        </div>
                    </dd>
                   
                    <dt class="p-t-10">Party</dt>

                    <dd>

                        <table border="1" id="tblParty">
                            <thead>
                                <tr style="background-color:#0094ff;color:white">
                                    <th>
                                        Name
                                    </th>
                                    <th>
                                      Order Index
                                    </th>
                                    <th>
                                        Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (var i = 0; i < Model.PartyList.Count(); i++)
                                {



                                    <tr>
                                        <td style="width:250px">
                                            <input type="hidden" value="@Model.PartyList[i].Value" name="PartyIDS" />
                                            @Html.HiddenFor(chk => chk.PartyList[i].Value)
                                            @Html.HiddenFor(chk => chk.PartyList[i].Text)
                                            @Html.LabelFor(chk => chk.PartyList[i].Checked, Model.PartyList[i].Text)

                                        </td>

                                        <td>
                                            <input type="text" name="OrderIndex" value="@Model.PartyList[i].Order_Index"  readonly="readonly"/>
                                           

                                        </td>

                                        <td>
                                            <a href="#" class="up btn fa fa-arrow-circle-up">&nbsp;Up</a>
                                            <a href="#" class="down btn fa fa-arrow-circle-down">&nbsp;Down</a>
                                        </td>
										

                                    </tr>

                                }
                            </tbody>
							
                        </table>


                    </dd>
                </dl>
                <button type="submit" class="btn succes btn-primary btn-block" value="Submit">Submit</button>


            </div>
        </div>
    </div>
}


<div class="modal fade" id="AddPartyModel" role="dialog">
        <div class="modal-dialog" style="width:600px;margin-top:15%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Add Party</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="row form-group">
                            <div class="col-md-4 text-right">Party Name:<span style="color:red">*</span></div>
                            <div class="col-md-8">
							
							
							
							 @Html.DropDownListFor(m => m.Survey_Type_ID,
                                       Model.PartyList
                                                .OrderBy(n => n.Text)
                                                .Select(n =>
                                                new SelectListItem
                                                {
                                                    Value = n.Value.ToString(),
                                                    Text = n.Text
                                                }).ToList()

                                       , "--Select--", new { @class = "form-control" })
							
							</div>
                        </div>

                       




                        <div class="row form-group">
                            <div class="col-md-4">
                                <button type="button" class="btn btn-primary text-center" data-dismiss="modal">Cancel</button>
                            </div>
                            <div class="col-md-4">
                             
                                <button type="button" class="btn btn-primary text-center">Add</button>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


<script>
    $(document).ready(function () {
        $(".up,.down").click(function () {

            var row = $(this).parents("tr:first");

            if ($(this).is(".up")) {
                row.insertBefore(row.prev());
            } else {
                row.insertAfter(row.next());
            }

            // 
           
            var Index = 1;

            $("#tblParty tbody tr").each(function () {
                var textval = $(this).find("td").eq(1).find(":text").val();
               
                $(this).find("td").eq(1).find(":text").val(Index);
                Index = Index + 1;
               // alert("TextBox text is " + textval + "; DropDown selected value is ");
            })

        });
    });


</script>